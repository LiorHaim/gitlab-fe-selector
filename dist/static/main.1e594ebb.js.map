{"version":3,"file":"static/main.1e594ebb.js","sources":["webpack://gitlab_fe_selector/./src/components/GitLabGroupPicker.tsx","webpack://gitlab_fe_selector/./src/plugin.ts"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { TextField, CircularProgress, FormControl, FormHelperText, Typography, Box, Button } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { useAsync } from 'react-use';\n\ninterface GitLabGroup {\n  id: number;\n  full_path: string;\n  name: string;\n}\n\ninterface GitLabProject {\n  id: number;\n  path_with_namespace: string;\n  name: string;\n  web_url: string;\n}\n\ninterface GitLabGroupPickerProps {\n  onChange: (value: string) => void;\n  rawErrors?: string[];\n  formData?: string;\n  uiSchema?: {\n    'ui:options'?: {\n        allowedHosts?: string[];\n        requestUserCredentials?: {\n            secretsKey: string;\n            additionalScopes?: {\n                gitlab?: string[];\n            };\n        };\n    };\n  };\n}\n\n// Required scopes for this plugin to work\nconst REQUIRED_SCOPES = ['read_api', 'api'];\n\n// Check if token has sufficient scope\nconst hasRequiredScope = (tokenScope: string): boolean => {\n  const scopes = tokenScope.split(' ');\n  return REQUIRED_SCOPES.some(required => scopes.includes(required));\n};\n\n// Auth environments to try (in order of priority)\n// Add more environment names here if your RHDH uses different names\nconst AUTH_ENVIRONMENTS = ['development', 'production', 'staging', 'default'];\n\nexport const GitLabGroupPicker = (props: GitLabGroupPickerProps) => {\n  const { onChange, rawErrors, uiSchema } = props;\n  \n  const allowedHosts = uiSchema?.['ui:options']?.allowedHosts;\n  const host = allowedHosts?.[0] || 'gitlab.com';\n  \n  const [selectedGroup, setSelectedGroup] = useState<GitLabGroup | null>(null);\n  const [selectedProject, setSelectedProject] = useState<GitLabProject | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const [tokenScope, setTokenScope] = useState<string | null>(null);\n  const [authEnv, setAuthEnv] = useState<string>(AUTH_ENVIRONMENTS[0]); // Track which env works\n  const [needsAuth, setNeedsAuth] = useState(false);\n  const [insufficientScope, setInsufficientScope] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [authError, setAuthError] = useState<string | null>(null);\n\n  // Try to get the GitLab token from the auth backend\n  const fetchToken = useCallback(async () => {\n    setIsLoading(true);\n    setAuthError(null);\n    setNeedsAuth(false);\n    setInsufficientScope(false);\n    setTokenScope(null);\n    \n    for (const env of AUTH_ENVIRONMENTS) {\n      try {\n        const response = await fetch(`/api/auth/gitlab/refresh?env=${env}`, { \n          credentials: 'include',\n          headers: { \n            'Accept': 'application/json',\n            'X-Requested-With': 'XMLHttpRequest'\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          const accessToken = data.providerInfo?.accessToken;\n          const scope = data.providerInfo?.scope || '';\n          \n          if (accessToken) {\n            setAuthEnv(env); // Remember which environment worked\n            \n            if (!hasRequiredScope(scope)) {\n              setTokenScope(scope);\n              setInsufficientScope(true);\n              setIsLoading(false);\n              return;\n            }\n            \n            setToken(accessToken);\n            setTokenScope(scope);\n            setIsLoading(false);\n            return;\n          }\n        }\n      } catch {\n        // Continue to next environment\n      }\n    }\n    \n    setNeedsAuth(true);\n    setIsLoading(false);\n  }, []);\n\n  useEffect(() => {\n    fetchToken();\n  }, [fetchToken]);\n\n  // Handle GitLab sign-in via OAuth popup\n  const handleSignIn = useCallback(() => {\n    const width = 500;\n    const height = 700;\n    const left = window.screenX + (window.innerWidth - width) / 2;\n    const top = window.screenY + (window.innerHeight - height) / 2;\n    \n    const popup = window.open(\n      `/api/auth/gitlab/start?env=${authEnv}`,\n      'GitLab Sign In',\n      `width=${width},height=${height},left=${left},top=${top}`\n    );\n    \n    if (!popup) {\n      setAuthError('Popup was blocked. Please allow popups for this site.');\n      return;\n    }\n    \n    const checkPopup = setInterval(() => {\n      if (popup.closed) {\n        clearInterval(checkPopup);\n        setTimeout(() => fetchToken(), 1000);\n      }\n    }, 500);\n  }, [authEnv, fetchToken]);\n\n  const getHeaders = useCallback((): Record<string, string> => {\n    if (!token) return {};\n    return { Authorization: `Bearer ${token}` };\n  }, [token]);\n\n  const { value: groups, loading: loadingGroups, error: errorGroups } = useAsync(async () => {\n    if (!token) return [];\n    const headers = getHeaders();\n    const response = await fetch(`https://${host}/api/v4/groups?min_access_level=50&per_page=100`, { headers });\n    if (!response.ok) {\n      throw new Error(`Failed to fetch groups: ${response.statusText}`);\n    }\n    return (await response.json()) as GitLabGroup[];\n  }, [host, token, getHeaders]);\n\n  const { value: projects, loading: loadingProjects } = useAsync(async () => {\n    if (!selectedGroup || !token) return [];\n    const headers = getHeaders();\n    const response = await fetch(`https://${host}/api/v4/groups/${selectedGroup.id}/projects?per_page=100`, { headers });\n    if (!response.ok) throw new Error(`Failed to fetch projects: ${response.statusText}`);\n    return (await response.json()) as GitLabProject[];\n  }, [selectedGroup, host, token, getHeaders]);\n\n  const handleGroupChange = (_: any, newValue: GitLabGroup | null) => {\n    setSelectedGroup(newValue);\n    setSelectedProject(null);\n    onChange(''); \n  };\n\n  const handleProjectChange = (_: any, newValue: GitLabProject | null) => {\n    setSelectedProject(newValue);\n    if (newValue) {\n      const repoName = newValue.path_with_namespace.split('/').pop() || '';\n      const url = `${host}?owner=${encodeURIComponent(selectedGroup?.full_path || '')}&repo=${encodeURIComponent(repoName)}`;\n      onChange(url);\n    } else {\n      onChange('');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Box p={2} display=\"flex\" alignItems=\"center\">\n        <CircularProgress size={20} style={{ marginRight: 8 }} />\n        <Typography variant=\"body2\">Checking GitLab authentication...</Typography>\n      </Box>\n    );\n  }\n\n  if (needsAuth) {\n    return (\n      <Box p={2} style={{ border: '1px solid #ccc', borderRadius: 4, backgroundColor: '#f5f5f5' }}>\n        <Typography variant=\"body1\" gutterBottom>\n          <strong>GitLab Authentication Required</strong>\n        </Typography>\n        <Typography variant=\"body2\" gutterBottom>\n          Please sign in to GitLab to select a repository.\n        </Typography>\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          onClick={handleSignIn}\n          style={{ marginTop: 8, marginRight: 8 }}\n        >\n          Sign in to GitLab\n        </Button>\n        <Button \n          variant=\"outlined\" \n          onClick={fetchToken}\n          style={{ marginTop: 8 }}\n        >\n          Retry\n        </Button>\n        {authError && (\n          <Typography color=\"error\" variant=\"caption\" display=\"block\" style={{ marginTop: 8 }}>\n            {authError}\n          </Typography>\n        )}\n      </Box>\n    );\n  }\n\n  if (insufficientScope) {\n    return (\n      <Box p={2} style={{ border: '1px solid #f0ad4e', borderRadius: 4, backgroundColor: '#fcf8e3' }}>\n        <Typography variant=\"body1\" gutterBottom style={{ color: '#8a6d3b' }}>\n          <strong>Additional Permissions Required</strong>\n        </Typography>\n        <Typography variant=\"body2\" gutterBottom>\n          Your GitLab token has <code>{tokenScope}</code> scope, but <code>read_api</code> is required.\n        </Typography>\n        <Typography variant=\"body2\" gutterBottom style={{ marginTop: 8 }}>\n          Please ask your administrator to add <code>read_api</code> to the GitLab OAuth scopes in <code>app-config.yaml</code>:\n        </Typography>\n        <Box component=\"pre\" style={{ \n          backgroundColor: '#fff', \n          padding: 8, \n          borderRadius: 4, \n          fontSize: '0.85em',\n          overflow: 'auto'\n        }}>\n{`auth:\n  providers:\n    gitlab:\n      development:\n        additionalScopes:\n          - read_api`}\n        </Box>\n        <Typography variant=\"body2\" gutterBottom style={{ marginTop: 8 }}>\n          After the config is updated, revoke the app in{' '}\n          <a href={`https://${host}/-/profile/applications`} target=\"_blank\" rel=\"noopener noreferrer\">\n            GitLab Settings\n          </a>{' '}\n          and sign in again.\n        </Typography>\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          onClick={handleSignIn}\n          style={{ marginTop: 8, marginRight: 8 }}\n        >\n          Sign in to GitLab\n        </Button>\n        <Button \n          variant=\"outlined\" \n          onClick={fetchToken}\n          style={{ marginTop: 8 }}\n        >\n          Retry\n        </Button>\n      </Box>\n    );\n  }\n\n  if (errorGroups) {\n    return (\n      <Box p={2} style={{ border: '1px solid #d9534f', borderRadius: 4, backgroundColor: '#f2dede' }}>\n        <Typography variant=\"body1\" gutterBottom style={{ color: '#a94442' }}>\n          <strong>Error Loading Groups</strong>\n        </Typography>\n        <Typography variant=\"body2\" gutterBottom>\n          {errorGroups.message}\n        </Typography>\n        <Button \n          variant=\"outlined\" \n          onClick={fetchToken}\n          style={{ marginTop: 8 }}\n        >\n          Retry\n        </Button>\n      </Box>\n    );\n  }\n\n  return (\n    <FormControl fullWidth error={rawErrors && rawErrors.length > 0}>\n      <Autocomplete\n        options={groups || []}\n        getOptionLabel={(option) => option.full_path}\n        loading={loadingGroups}\n        value={selectedGroup}\n        onChange={handleGroupChange}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label=\"Select Group (Owner Access)\"\n            variant=\"outlined\"\n            margin=\"normal\"\n            InputProps={{\n              ...params.InputProps,\n              endAdornment: (\n                <React.Fragment>\n                  {loadingGroups ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                  {params.InputProps.endAdornment}\n                </React.Fragment>\n              ),\n            }}\n          />\n        )}\n      />\n\n      <Autocomplete\n        options={projects || []}\n        getOptionLabel={(option) => option.name}\n        loading={loadingProjects}\n        value={selectedProject}\n        onChange={handleProjectChange}\n        disabled={!selectedGroup}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label=\"Select Repository\"\n            variant=\"outlined\"\n            margin=\"normal\"\n            InputProps={{\n              ...params.InputProps,\n              endAdornment: (\n                <React.Fragment>\n                  {loadingProjects ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                  {params.InputProps.endAdornment}\n                </React.Fragment>\n              ),\n            }}\n          />\n        )}\n      />\n      {rawErrors && rawErrors.length > 0 && (\n        <FormHelperText error>{rawErrors[0]}</FormHelperText>\n      )}\n    </FormControl>\n  );\n};\n","import { createPlugin } from '@backstage/core-plugin-api';\nimport { createScaffolderFieldExtension } from '@backstage/plugin-scaffolder-react';\nimport { GitLabGroupPicker } from './components/GitLabGroupPicker';\n\nexport const gitlabFeSelectorPlugin = createPlugin({\n  id: 'gitlab-fe-selector',\n});\n\nexport const GitLabGroupPickerFieldExtension = gitlabFeSelectorPlugin.provide(\n  createScaffolderFieldExtension({\n    name: 'GitLabGroupPicker',\n    component: GitLabGroupPicker,\n  }),\n);\n\n"],"names":["REQUIRED_SCOPES","hasRequiredScope","tokenScope","scopes","required","AUTH_ENVIRONMENTS","gitlabFeSelectorPlugin","createPlugin","createScaffolderFieldExtension","props","onChange","rawErrors","uiSchema","allowedHosts","host","selectedGroup","setSelectedGroup","useState","selectedProject","setSelectedProject","token","setToken","setTokenScope","authEnv","setAuthEnv","needsAuth","setNeedsAuth","insufficientScope","setInsufficientScope","isLoading","setIsLoading","authError","setAuthError","fetchToken","useCallback","env","response","fetch","data","accessToken","scope","useEffect","handleSignIn","left","window","top","popup","checkPopup","setInterval","clearInterval","setTimeout","getHeaders","groups","loadingGroups","errorGroups","useAsync","headers","Error","projects","loadingProjects","Box","CircularProgress","Typography","Button","FormControl","Autocomplete","option","_","newValue","params","TextField","React","repoName","encodeURIComponent","FormHelperText"],"mappings":"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"}